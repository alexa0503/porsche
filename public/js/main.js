function H5Jump(){H5Jump.me=this;window.h5jump=this;this.historyData="";this.point=ABC.start;this.btn_reflect(this.point);this.init_reflect(this.point)}H5Jump.prototype.constructor=H5Jump;H5Jump.prototype.me;H5Jump.prototype.historyData="";H5Jump.prototype.point="";H5Jump.prototype.back=function(e){if(this.historyData==""){return}if(e)$("."+this.point).fadeOut();else $("."+this.point).hide();if(this.historyData.indexOf(",")==-1){this.point=this.historyData;this.historyData="";this.btn_reflect(this.point);this.init_reflect(this.point)}else{var t=this.historyData.split(",");t.pop();this.point=t.pop();this.historyData=t.join(",");this.doNext(e)}};H5Jump.prototype.doNext=function(e,t){var a=this.point;if(this.historyData==""){this.historyData=a}else{this.historyData+=","+a}var i=ABC.route;for(var r=0,n;(n=i[r])!=null;r++){if(typeof n!="string"){continue}if(n.indexOf(this.historyData+",")!=-1){wantln=n;var o=n.split(this.historyData+",")[1];if(o.indexOf(",")>-1){o=o.split(",")[0]}this.point=o;if(!t){}break}}this.__do__(e)};H5Jump.prototype.doRouteBack=function(e){console.log("doRouteBack---:",this.historyData);console.log("this.point",$("."+this.point));if(e)$("."+this.point).fadeOut();else $("."+this.point).hide();if(this.historyData.indexOf(",")>-1){var t=this.historyData.split(",").reverse()[0];this.point=t}else{var t=this.historyData;this.point=t}this.__do__(e)};H5Jump.prototype.doRoute=function(e,t){console.log("doRoute---:",e);var a=ABC.route;for(var i=0,r;(r=a[i])!=null;i++){if(typeof r=="string"){continue}var n=r[0];var o=r[1];console.log("this.point---:",this.point);console.log("tagone---:",n);console.log("route---:",o);if(e==n){if(o.indexOf(this.point+",")>-1){console.log("yes");var s=o.split(this.point+",")[1];if(s.indexOf(",")>-1){s=s.split(",")[0]}this.point=s;break}}}this.__do__(t)};H5Jump.prototype.__do__=function(e){this.btn_reflect(this.point);this.init_reflect(this.point);if(e)$("."+this.point).fadeIn();else $("."+this.point).show()};H5Jump.prototype.init_reflect=function(tag){var initArr=ABC.init;for(var i=0;i<initArr.length;i++){var btnSetting=initArr[i];var rotue=btnSetting[0];if(rotue==tag){var xpath=btnSetting[1];var evt=btnSetting[2];var element=$(xpath);if(element.length){evt=evt.replace("this",'"'+xpath+'"');eval(evt)}else{}}}};H5Jump.prototype.btn_reflect=function(e){var t=ABC.btn;for(var a=0;a<t.length;a++){var i=t[a];var r=i[0];if(r==e){var n=i[1];var o=i[2];var s=$(n);if(s.length){s.attr("onclick",o);s.addClass("btnbtn")}else{}}}};function H5Loader(){}H5Loader.prototype.constructor=H5Loader;H5Loader.loadImg=function(e,t,a,i){var r=$(e);var n=0;function o(){n++;t.call(i,n,r.length);if(n==r.length){a.call(i)}}for(var s=0;s<r.length;s++){var c=r[s];c.crossOrigin="anonymous";if(!$(c).attr("original-data")){continue}var l=$(c).attr("original-data");c.onload=function(){o()};c.onerror=function(){JSdebug.trace("败2="+H5Loader.limit(this.src));o()};if(!l){console.log(l,c)}if(l==undefined){console.log("错误",c)}c.src=l}};H5Loader.loadImg_oj=function(e,t,a,i){var r=OJ.getAll(e);var n=0;function o(){n++;t.call(i,n,r.length);if(n==r.length){a.call(i)}}for(var s=0;s<r.length;s++){var c=r[s];c.crossOrigin="anonymous";var l=c.getAttribute("original-data");c.onload=c.onerror=function(){o()};c.src=l}};H5Loader.delayloadjs=function(e,t,a,i,r){if(r==undefined)r=false;var n=0;window.delyjsok=function(){n++;if(n==e.length){a.call(i)}else{t.call(i)}};e.map(function(e,t,a){var i=document.getElementsByTagName("head")[0];var n=document.createElement("script");n.type="text/javascript";if(r)e=e+"?r="+Math.random();n.src=e;n.setAttribute("onload","window.delyjsok();");i.appendChild(n)})};H5Loader.loadMp3_oj_dy=function(e,t,a,i,r){var n=[];var o=e.length;var s=0;function c(){s++;if(t){t.call(i,s,o)}if(s==o){if(a){a.call(i,n)}}}for(var l=0;l<e.length;l++){if(r){var p=e[l]+"?r="+Math.random()}else{var p=e[l]}var f=new Audio("music/btn_.mp3");f.addEventListener("canplaythrough",function(){this.pause();c()},false);f.src=p;f.muted=true;f.play();n.push(f)}};H5Loader.loadImg2=function(e,t,a,i,r,n){var o=[];var s=uMath.random(14);var c=0;var l=[];var p=$('<div class="abs temp'+s+'"></div>');$("body").append(p);p.css("left","-10000px");p.css("top","-10000px");var f=p[0];function h(){c++;if(r){t.call(i,c,e.length,n)}else{t.call(i,c,e.length)}if(c==e.length){if(n){n.unshift(o);a.apply(i,n)}else{a.call(i,o)}}else{}}for(var d=0;d<e.length;d++){var u=e[d];var v=new Image;v.crossOrigin="anonymous";v.onload=function(){this.style.display="none";h()};v.onerror=function(){this.style.display="none";JSdebug.trace("败1="+H5Loader.limit(this.src));h()};v.src=u;o.push(v);f.appendChild(v)}};H5Loader.limit=function(e){var t=e.split("/");t.reverse();while(t.length>2){t.pop()}t.reverse();var a=t.join("/");return a};function HKit(){}HKit.prototype.constructor=HKit;HKit.delay=function(e,t,a,i){if(t==undefined){console.error("错误")}var r=window.setTimeout(function(){if(i==null){t.call(a)}else{t.apply(a,i)}},e*1e3);return r};HKit.loop=function(e,t,a,i,r){var n=window.setInterval(function(){if(i)t.apply(a,i);else if(a)t.call(a);else t()},e*1e3);if(r||r==undefined){if(i)t.apply(a,i);else t.call(a)}return n};HKit.enterframe=function(e,t,a,i){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();(function e(){requestAnimFrame(e);if(i)t.apply(a,i);else t.call(a)})()};HKit.getMcInRoot=function(e,t){var a=e[t];e.removeChild(a);if(a.hasOwnProperty("gotoAndStop"))a.gotoAndStop(0);return a};HKit.aCt=function(e){var t=new createjs.Container;e.addChild(t);return t};HKit.aRec=function(e,t){var a=new createjs.Shape;a.graphics.beginFill(t).drawRect(0,0,660,960);e.addChild(a);return a};HKit.getMc=function(e,t){return HKit.getChild(e,t)};HKit.getChild=function(e,t){if(e==null)console.err(t+"之前为空");if(t==null)console.err(t+"为空");if(t.indexOf(".")==-1){return e[t]}var a=t.split(".").length;var i=e;while(a>1){var r=t.substring(0,t.indexOf("."));t=t.substring(t.indexOf(".")+1,t.length);i=i[r];a=t.split(".").length}if(i==null)console.err(t+"之前a为空");if(t==null)console.err(t+"为空");return i[t]};HKit.getText=function(e,t){var a=e[t];return a};HKit.fun2=function(e,t,a){return function(){if(arguments.length>0){e.apply(t,arguments)}else{e.call(t)}}};HKit.fn=function(e,t,a){var i=function(){if(arguments.length>0){if(a!=undefined){var i=[];for(var r=0;r<arguments.length;r++){i[r]=arguments[r]}i=i.concat(a);e.apply(t,i)}else{e.apply(t,arguments)}}else{if(a!=undefined){e.apply(t,a)}else{e.call(t)}}};if(HKit._deleArr_==undefined){HKit._deleArr_=[]}HKit._deleArr_.push({fn:e,ref:t,ff:i});return i};HKit.de=function(e,t){if(HKit._deleArr_==undefined)return undefined;for(var a=HKit._deleArr_.length-1;a>=0;a--){var i=HKit._deleArr_[a];if(i["fn"]==e&&i["ref"]==t){return i["ff"]}}return undefined};HKit.debugLayer=function(e){for(var t=0;t<e.numChildren;t++){}};HKit.remove=function(e){if(e.parent!=undefined){e.parent.removeChild(e)}};HKit.removeAll=function(e){while(e.numChildren>0){e.removeChildAt(0)}};function JSdebug(){}JSdebug.prototype.constructor=JSdebug;JSdebug.maxNum=150;JSdebug.initDebug=function(e){if(!isNaN(e)){JSdebug.maxNum=e}if(document.getElementsByClassName(".debug").length==0){console.log("初始化调试面板");var t=document.createElement("div");t.setAttribute("class","debug");document.body.appendChild(t)}};JSdebug.print=function(){JSdebug.trace.apply(JSdebug,arguments)};JSdebug.trace=function(){var e=[];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}var a=document.getElementsByClassName("debug")[0];if(!a)return;var i=a.innerText;a.innerText=(e.join("|")+"..."+i).substring(0,JSdebug.maxNum)};JSdebug.clear=function(){var e=document.getElementsByClassName("debug")[0];if(e)e.innerText=""};function OJ(){}OJ.prototype.constructor=OJ;OJ.convertToArray=function(e){var t=null;try{t=Array.prototype.slice.call(e,0)}catch(r){t=new Array;for(var a=0,i=e.length;a<i;a++){t.push(e[a])}}return t};OJ.GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");var a=window.location.search.substr(1).match(t);if(a!=null)return unescape(a[2]);return null};OJ.getQueryStringArgs=function(){var e=location.search.length>0?location.search.substring(1):"",t={},a=e.length?e.split("&"):[],i=null,r=null,n=null,o=0,s=a.length;for(o=0;o<s;o++){i=a[o].split("=");r=decodeURIComponent(i[0]);n=decodeURIComponent(i[1]);if(r.length){t[r]=n}}return t};OJ.getSub=function(e,t){var a=t.split(" ");var i=e;var r=[];function n(e,t){if(t.indexOf(".")==0){t=t.replace(".","");_outArr2=e.getElementsByClassName(t);h=[];for(var a=0;a<_outArr2.length;a++){h.push(_outArr2[a])}}else if(t.indexOf("#")==0){t=t.replace("#","");h=[e.getElementById(t)]}else{_outArr2=e.getElementsByTagName(t);h=[];for(var a=0;a<_outArr2.length;a++){h.push(_outArr2[a])}}return h}var o=[i];var s=0;while(a.length){var c=a.shift();if(c==""){continue}var l=[];for(var p=0;p<o.length;p++){var f=o[p];var h=n(f,c);l=l.concat(h)}o=l.concat();s++}for(var d=0;d<h.length;d++){r.push(h[d])}return r};OJ.getAll=function(e){return OJ.getSub(document,e)};OJ.getOne=function(e){return OJ.getSub(document,e)[0]};OJ.offset=function(e){var t={top:0,left:0};OJ.getOffset(t,e,true);return t};OJ.getOffset=function(e,t,a){var i;if(t.nodeType!==1){return}i=window.getComputedStyle(t)["position"];if(typeof a==="undefined"&&i==="static"){OJ.getOffset(e,t.parentNode);return}e.top=t.offsetTop+e.top-t.scrollTop;e.left=t.offsetLeft+e.left-t.scrollLeft;if(i==="fixed"){return}OJ.getOffset(e,t.parentNode)};OJ.text=function(e){var t="";e=e.childNodes||e;for(var a=0;a<e.length;a++){t+=e[a].nodeType!=1?e[a].nodeValue:text(e[a].childNodes)}return t};OJ.getWinWH=function(){var e=window.innerWidth;var t=window.innerHeight;var e=document.body.clientWidth;var t=document.body.clientHeight;return[e,t]};OJ.getOffsetWH=function(){var e=document.body.offsetWidth;var t=document.body.offsetHeight;return[e,t]};OJ.getWinWH__=function(){var e=OJ.getWinWH();var t=e[0];var a=e[1];if(t>a){return[t,a]}else{return[a,t]}};OJ.getWinW=function(){if(window.innerHeight)winHeight=window.innerHeight;else if(document.body&&document.body.clientHeight)winHeight=document.body.clientHeight;return winHeight};OJ.hasClass=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))};OJ.addClass=function(e,t){if(!OJ.hasClass(e,t))e.className+=" "+t};OJ.removeClass=function(e,t){if(OJ.hasClass(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ")}};OJ.toggleClass=function(e,t){if(hasClass(e,t)){OJ.removeClass(e,t)}else{OJ.addClass(e,t)}};OJ.toggleClassTest=function(){var e=document.getElementById("test");OJ.toggleClass(e,"testClass")};OJ.remove=function(e){var t=e.parentNode;if(t){t.removeChild(e)}};OJ.getTime=function(){var e=new Date;return e.getTime()};OJ.getScrollPos=function(){var e=document.body.scrollTop==0?document.documentElement.scrollTop:document.body.scrollTop;var t=document.body.scrollHeight-document.body.offsetHeight;return[e,t]};function UDevice(){}UDevice.prototype.constructor=UDevice;UDevice.prototype.HasPerformance;UDevice.prototype.DevicePixelRatio;UDevice.prototype.ImgRatio;UDevice.prototype.BrowserID;UDevice.prototype.PlatformID;UDevice.prototype.isApple;UDevice.prototype.isMobile;UDevice.prototype.LoopInterval;UDevice.me;UDevice.getMe=function(){if(UDevice.me==null){UDevice.me=new UDevice;UDevice.me.init()}return UDevice.me};UDevice.prototype.init=function(){this.DevicePixelRatio=UDevice.getDevicePixelRatio();this.HasPerformance=UDevice.supportPerformance();this.ImgRatio=UDevice.getImgRatio();this.BrowserID=UDevice.CheckExplorerID();this.PlatformID=UDevice.getPlatformID();this.isApple=this.checkIsApple();this.isMobile=this.checkIsMobile();this.HasFastLoop=this.supportFastLoop()};UDevice.checkSupportAdvanceH5=function(){var e=document.createElement("canvas");e.h5ou=false;var t={h5qu:false,h5ru:false,set_opacity:true,zDistance:true,h5tu:false,h5uu:false,h5vu:true};var a=["experimental-webgl","webgl","webkit-3d","moz-webgl"];for(var i=0;i<a.length;i++){try{e.h5ou=e.getContext(a[i],t)}catch(e){}if(e.h5ou){break}}var r=e.h5ou!==false?true:false;e.h5ou=null;e=null;return r};UDevice.check_canvas2d=function(){var e=document.createElement("canvas");var t=e.getContext("2d");var a=typeof t=="object"?true:false;e=null;t=null;return a};UDevice.checkSupportBaseH5=function(){return UDevice.check_transform()&&UDevice.check_canvas2d()};UDevice.check_transform=function(){if(!Ucss.contain_css_attribute("transform webkitTransform mozTransform oTransform msTransform"))return false;if(!Ucss.isSupport_perspective()){return false}return true};UDevice.prototype.getBestLoopInterval=function(){switch(this.PlatformID){case 1:return 33;case 2:var e=this.getSthNum222();switch(e){case 0:return 50;case 1:return 40;case 2:return 33;case 3:return 25;default:return 33}return 5;case 3:return 33;case 4:return 33;default:return 33}};UDevice.prototype.getSthNum222=function(){var e=UDevice.getMe().screenSize.x<UDevice.getMe().screenSize.y?UDevice.getMe().screenSize.x:UDevice.getMe().screenSize.y;var t=UDevice.getMe().screenSize.x<UDevice.getMe().screenSize.y?UDevice.getMe().screenSize.y:UDevice.getMe().screenSize.x;if(e==320)return t==480?0:1;if(e==375)return 2;if(e==414)return 3;return-1};UDevice.prototype.supportFastLoop=function(){return window.requestAnimationFrame!==undefined?true:false};UDevice.prototype.isScreenScaleOK=function(){if(!UDevice.getMe().isMobile){return false}var e=3/4;var t=UDevice.getMe().screenSize.x/UDevice.getMe().screenSize.y;var a=Math.abs(e-t);if(a<.01){return true}return UDevice.getMe().screenSize.x>=580?true:false};UDevice.prototype.checkIsMobile=function(){return this.PlatformID>=0&&this.PlatformID<=4};UDevice.supportPerformance=function(){if(typeof window.h5qq!=="undefined"){if(typeof window.h5qq.now!=="undefined"){return true}}return false};UDevice.prototype.checkIsApple=function(){switch(this.PlatformID){case 2:return true;case 1:default:return false}};UDevice.getDevicePixelRatio=function(){return window.devicePixelRatio!==undefined?Math.max(window.devicePixelRatio,1):1};UDevice.getScreenSize=function(){if(window.screen==undefined){return UDevice.countScreenSize(window.innerWidth,window.innerHeight)}if(window.screen.width==undefined){return UDevice.countScreenSize(window.innerWidth,window.innerHeight)}return UDevice.countScreenSize(window.screen.width,window.screen.height)};UDevice.countScreenSize=function(e,t){};UDevice.getImgRatio=function(){return 1/UDevice.getDevicePixelRatio()};UDevice.CheckExplorerID=function(){if(navigator.userAgent.indexOf("Firefox")!=-1)return 2;else if(navigator.userAgent.indexOf("Chrome")!=-1)return 3;else if(navigator.userAgent.indexOf("Safari")!=-1)return 4;else if(navigator.userAgent.indexOf("MSIE")!=-1)return 1;else if(navigator.userAgent.indexOf("rv:")!=-1)return 1;else if(navigator.userAgent.indexOf("iPhone")!=-1)return 4;else if(navigator.userAgent.indexOf("iPod")!=-1)return 4;else if(navigator.userAgent.indexOf("iPad")!=-1)return 4;return 0};UDevice.getPlatformID=function(){if(navigator.userAgent.indexOf("Android")!=-1)return 1;else if(navigator.userAgent.indexOf("iPad")!=-1)return 2;else if(navigator.userAgent.indexOf("iPod")!=-1)return 2;else if(navigator.userAgent.indexOf("iPhone")!=-1)return 2;else if(navigator.userAgent.indexOf("webOS")!=-1)return 3;else if(navigator.userAgent.indexOf("mobile")!=-1)return 4;else if(navigator.userAgent.indexOf("Windows Phone")!=-1)return 4;else if(navigator.userAgent.indexOf("Windows Mobile")!=-1)return 4;else if(navigator.userAgent.indexOf("IEMobile")!=-1)return 4;else if(navigator.userAgent.indexOf("Nokia")!=-1)return 4;else if(navigator.appVersion.indexOf("Win")!=-1)return 5;else if(navigator.appVersion.indexOf("Mac")!=-1)return 6;else if(navigator.appVersion.indexOf("Linux")!=-1)return 7;else if(navigator.appVersion.indexOf("X11")!=-1)return 8;return 0};UDevice.is_weixin=function(){var e=navigator.userAgent.toLowerCase();if(e.match(/MicroMessenger/i)=="micromessenger"){return true}else{return false}};function uMath(){}uMath.prototype.constructor=uMath;uMath.formate_time=function(e){if(e<60){if(e<10)return a="00:0"+e;return"00:"+e}var t=Math.floor(e/60);var a=e%60;if(a<10)a="0"+a;if(t<10)return"0"+t+":"+a;else return"0"+t+":"+a;return"00:00"};uMath.vvScope=function(e,t,a,i){if(i){var r=uMath.vvScope(e,t,a);var n,o;if(e[0]<e[1]){n=e[0];o=e[1]}else{n=e[1];o=e[0]}return Math.max(n,Math.min(o,r))}else{return(e[0]-e[1])*(a-t[1])/(t[0]-t[1])+e[1]}};uMath.systemChange=function(e,t,a){var i=parseInt(e,t);return i.toString(a)};uMath.random=function(e){return Math.ceil(Math.random()*e)};uMath.randomWithin=function(e,t,a){var i=Math.floor((t-e+a)/a);return Math.floor(Math.random()*i)*a+e};uMath.limit=function(e,t,a){if(e>t)return Math.max(t,Math.min(e,a));else return Math.max(e,Math.min(t,a));return a};uMath.abs=function(e){return e<0?-e:e};uMath.distance=function(e,t){return Math.abs(Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)))};uMath.distanceV2=function(e,t){var e=e.localToLocal(e.x,e.y,t);return Math.abs(Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)))};function ActMgr(){this.arr=[]}ActMgr.prototype.constructor=ActMgr;ActMgr.prototype.arr;ActMgr.prototype.push=function(e){e.actID=this.arr.length;this.arr.push(e)};ActMgr.prototype.preone=function(){if(this.arr.length>1){return this.arr[this.arr.length-2]}return null};ActMgr.prototype.doNxt=function(e,t){var a=e+1;if(a<this.arr.length){var i=this.arr[a];t(i)}};ActMgr.prototype.first=function(){return this.arr[0]};function AniLoop(){AniLoop.me=this;window.an=this;this.obj0={}}AniLoop.prototype.constructor=AniLoop;AniLoop.prototype.obj0;AniLoop.me;AniLoop.prototype.do_png_top=function(){var e=$(".png_top")[0];var t=ABC.logoArr;for(var a=0;a<t.length;a++){var i=t[a];i.setAttribute("class","ptimg");i.style.display="none";e.appendChild(i)}var r=0;function n(){if(r==t.length){window.clearInterval(o)}else{var e=t[r];e.style.display="block";if(r>0){var a=t[r-1];a.style.display="none"}}r++}var o=HKit.loop(.1,n,this)};AniLoop.prototype.waitGif=function(){var e=$(".n2 .gif img");var t=e.attr("src");e.attr("original-data",t);e.attr("src","images/empty.png")};AniLoop.prototype.doGif=function(){var e=$(".n2 .gif img");var t=e.attr("original-data");e.attr("src",t)};AniLoop.prototype.loop=function(e){if(!this.obj0.hasOwnProperty(e)){this.obj0[e]=true}var t=this;var a=$(e);function i(){if(!t.obj0.hasOwnProperty(e)){return}a.fadeIn("slow",r)}function r(){if(!t.obj0.hasOwnProperty(e)){return}a.fadeOut("slow",i)}r()};AniLoop.prototype.killLoop=function(e){if(this.obj0.hasOwnProperty(e)){delete this.obj0[e]}};AniLoop.prototype.now=function(e){var t=$(e).parent();if(t.css("display")=="none"){t.show();t.children("div").hide()}};function Cn2(){Cn2.me=this;$(".btn-start").hide()}Cn2.prototype.constructor=Cn2;Cn2.prototype.me;Cn2.prototype.doNxt=function(){ABC.inloop0=false;ABC.inloop1=true;window.preload.playMp3btn(Muz.btn_,true);window.preload.playMp3(Muz.loop1,true);window.preload.stopMp3Other();window.preload.playMp3pre(Muz.m1,true);h5jump.doNext();$(".n2").hide();mv1.kill()};function Cn3(){Cn3.me=this;this.sel=0}Cn3.prototype.constructor=Cn3;Cn3.prototype.sel;Cn3.me;Cn3.prototype.init=function(){$(".n3 .btn-1 .no-sel").hide();$(".n3 .btn-1 .sel").hide();$(".n3 .btn-2 .no-sel").hide();$(".n3 .btn-2 .sel").hide();$(".n3 .btn-1 .txt").hide();$(".n3 .btn-2 .txt").hide()};Cn3.prototype.sel1=function(){$(".n3 .btn-1 .no-sel").fadeOut();$(".n3 .btn-1 .sel").fadeIn();$(".n3 .btn-2 .no-sel").fadeIn();$(".n3 .btn-2 .sel").fadeOut();$(".n3 .btn-1").appendTo($(".n3"));$(".n3 .btn-1 .txt").fadeIn();$(".n3 .btn-2 .txt").fadeOut();this.sel=ABC.gender=1};Cn3.prototype.sel2=function(){$(".n3 .btn-1 .no-sel").fadeIn();$(".n3 .btn-1 .sel").fadeOut();$(".n3 .btn-2 .no-sel").fadeOut();$(".n3 .btn-2 .sel").fadeIn();$(".n3 .btn-2").appendTo($(".n3"));$(".n3 .btn-1 .txt").fadeOut();$(".n3 .btn-2 .txt").fadeIn();this.sel=ABC.gender=2};Cn3.prototype.doNxt=function(){if(Cn3.me.sel){if($(".n3 .btn-1")[0]){$(".n3 .btn-1")[0].onclick=null}if($(".n3 .btn-2")[0]){$(".n3 .btn-2")[0].onclick=null}if($(".n3 .btn-sure")[0]){$(".n3 .btn-sure")[0].onclick=null;$(".n3 .btn-sure").removeClass("css-btn-alpha")}HKit.delay(.6,function(){$(".n3").fadeOut();h5jump.doNext()})}};function Cn4(){$(".n5 .face1m").hide();$(".n5 .face1f").hide();HKit.delay(1,function e(){window.an.killLoop(".n3 .bg-light");$(".n3").hide();var t=$(".n3 .btn-sure")[0];t.removeAttribute("onclick");$(".n3").remove()},this);if(ABC.gender==1){$(".n4 .n4n1").show();$(".n4 .n4n2").hide();AniLoop.me.loop($(".n4 .n4n1 .light"))}else{$(".n4 .n4n1").hide();$(".n4 .n4n2").show();AniLoop.me.loop($(".n4 .n4n2 .light"))}}Cn4.prototype.constructor=Cn4;function Cn5(){if(OJ.GetQueryString("test")){$(".buffer").css({position:"fixed",left:"0",top:"0",zIndex:"1000"})}window.cn5=this;var e=$("#pre-male");var t=$("#pre-female");t.css("display","none");e.css("display","none");var a={bottom:"0%",left:"0%"};var i={bottom:"9990%",left:"9990%"};if(ABC.gender==1){$(".n5 .face1m").css(a);$(".n5 .face1f").css(i)}else{$(".n5 .face1f").css(i);$(".n5 .face1m").css(a)}}Cn5.prototype.constructor=Cn5;Cn5.prototype.imgss1;Cn5.prototype.imgss2;Cn5.prototype.load=function(){$(".n5 .btns_").hide();MV2.init();if(ABC.gender==1){var e=new ImgAsset(1);e.ing=HKit.fn(this.oning,this);e.ok=HKit.fn(this.onok,this);window.cn5.imgss1=e}else{var t=new ImgAsset(2);t.ing=HKit.fn(this.oning,this);t.ok=HKit.fn(this.onok,this);window.cn5.imgss2=t}};Cn5.prototype.oning=function(e,t){$(".btm-red-bar").css("width",e/t*70+"%")};Cn5.prototype.onok=function(){H5Loader.loadImg(".game-main-body img",this.oning2,this.onok2,this)};Cn5.prototype.onok2=function(){$(".btm-red-bar").css("width",0+"%");$(".game-main-body .movie-bg").show();MV2.me.playMovie();$(".game-main-stt").hide();$(".game-main-body").show()};Cn5.prototype.oning2=function(e,t){$(".btm-red-bar").css("width",e/t*30+70+"%")};function CnEnd(){CnEnd.me=this}CnEnd.prototype.constructor=CnEnd;CnEnd.me;CnEnd.prototype.startplay=function(){$(".game-main-end").show();$(".game-main-end>div").hide();$(".game-main-end .last").show();window.h5jump.point="last";window.h5jump.doNext();var e=$(".last .button");var t=e.width();e.css({height:t*.382+"px"});new ScreenLast_Face(ABC.gender)};CnEnd.prototype.startload=function(){H5Loader.loadImg(".game-main-end img",this.ending,this.endok,this)};CnEnd.prototype.endok=function(){};CnEnd.prototype.ending=function(e,t){};CnEnd.prototype.jumpForm=function(){location.href="https://pec-shanghai.cn/cn/page/pde"};function CnQrcode(){window.qrcode=this;CnQrcode.me=this}CnQrcode.prototype.constructor=CnQrcode;CnQrcode.prototype.me;function CnShare(){CnShare.prototype=new MV;window.share=this;CnShare.me=this}CnShare.prototype.constructor=CnShare;CnShare.prototype.me;CnShare.prototype.asset;CnShare.prototype.loadAsset=function(){this.asset=new ImgAsset("4");this.asset.ing=HKit.fn(this.ing,this);this.asset.ok=HKit.fn(this.ok,this)};CnShare.prototype.ok=function(){};CnShare.prototype.ing=function(e,t){};CnShare.prototype.doAni=function(){window.preload.playMp3preImmediately(Muz.page_share,false);window.h5jump.doRoute("a",0);var e=this.asset.getImgOne("12");for(var t=0;t<e.length;t++){var a=e[t];$(".share .timeline").append(a)}this.playJPG(e)};CnShare.prototype.playJPG=function(e){if(e==undefined){return}var t=this;var a=0;function i(){if(a==e.length){window.clearInterval(t.d);return}var i=e[a];i.style.display="block";if(a==0){var r=e[e.length-1];r.style.display="none"}if(a>0&&a<e.length){var r=e[a-1];r.style.display="none"}a++}this.d=HKit.loop(ABC.frame,i,this)};function Face0_Wait(){Face0_Wait.me=this;SiteEvt.add("exeing",this.exeing,this);SiteEvt.add("exeok",this.exeok,this)}Face0_Wait.prototype.constructor=Face0_Wait;Face0_Wait.me;Face0_Wait.prototype.maskw;Face0_Wait.prototype.maskh;Face0_Wait.prototype.cvs0;Face0_Wait.prototype.cvs1;Face0_Wait.prototype.cvs2;Face0_Wait.prototype.move_y;Face0_Wait.prototype.graHeight;Face0_Wait.prototype.interval;Face0_Wait.prototype.exeok=function(e){$(".dom-face-wait").fadeOut("fast",HKit.fn(function(){window.clearInterval(this.interval);Face0_Wait.me.kill()},this))};Face0_Wait.prototype.exeing=function(e){Face0_Wait.me.init();$(".dom-face-wait").hide();$(".dom-face-wait").fadeIn("slow")};Face0_Wait.prototype.init=function(){this.cw=1136;this.ch=640;this.maskw=1136;this.maskh=640;this.graHeight=640*2;this.lineHeight=4;this.lineDistance=6;this.move_y=-640*2;var e=uPEC.aDiv(".dom-face-wait");this.div=e;this.drawCanvas();this.start()};Face0_Wait.prototype.start=function(){this.interval=HKit.loop(1/30,this.doLoop,this)};Face0_Wait.prototype.doLoop=function(){this.move_y+=6;if(this.move_y>0){this.move_y=-this.maskh}this.doDraw(this.move_y)};Face0_Wait.prototype.drawCanvas=function(){var e=uPEC.aDiv(".dom1m");var t=uPEC.aDiv();var a=uPEC.aCanvas(this.cw,this.ch);this.cvs0=a;this.cvs0.appendTo(this.div);var i=uPEC.aCanvas(this.maskw,this.maskh);this.cvs1=i;var r=uPEC.aCanvas(this.maskw,this.graHeight);this.cvs2bg=r;var n=uPEC.aCanvas(this.maskw,this.graHeight);this.cvs2=n;var o=uPEC.aCanvas(this.maskw,this.maskh);this.cvs3=o;var s=uPEC.aCanvas(this.maskw,this.maskh);this.cvs0a=s;var c=this.cvs2[0];var l=c.getContext("2d");l.beginPath();var p=l.createLinearGradient(0,0,0,this.graHeight);var f="255, 0, 0";p.addColorStop(0,"rgba("+f+",0)");p.addColorStop(.1,"rgba("+f+",0)");p.addColorStop(.25,"rgba("+f+",0)");p.addColorStop(.34,"rgba("+f+",0)");p.addColorStop(.381,"rgba("+f+",0.35)");p.addColorStop(.5,"rgba("+f+",1)");p.addColorStop(.501,"rgba("+f+",0)");p.addColorStop(.601,"rgba("+f+",0)");p.addColorStop(.75,"rgba("+f+",0)");p.addColorStop(.84,"rgba("+f+",0)");p.addColorStop(.881,"rgba("+f+",0.35)");p.addColorStop(1,"rgba("+f+",1)");l.fillStyle=p;l.rect(0,0,this.cw,this.graHeight);l.fill();this.doDraw(0)};Face0_Wait.prototype.doDraw=function(e){var t=ABC.gender;var a=this.cvs0[0];var i=a.getContext("2d");i.clearRect(0,0,this.cw,this.ch);i.globalCompositeOperation="source-over";var r=this.cvs1[0];var n=r.getContext("2d");n.globalCompositeOperation="source-over";n.clearRect(0,0,this.cw,this.ch);var o=this.cvs2[0];var s=this.cvs3[0];var c=s.getContext("2d");c.globalCompositeOperation="source-over";c.clearRect(0,0,this.cw,this.maskh);var l=parseInt(this.ch/(this.lineHeight+this.lineDistance));for(var p=0;p<l;p++){c.fillRect(0,(this.lineHeight+this.lineDistance)*p,this.cw,this.lineHeight)}n.drawImage(s,0,0);n.globalCompositeOperation="source-in";n.drawImage(o,0,e,this.cw,this.graHeight);var f=this.cvs0a[0];var h=f.getContext("2d");h.clearRect(0,0,this.cw,this.ch);h.drawImage(r,0,0);i.drawImage(f,0,0);i.globalCompositeOperation="destination-out";if(ABC.gender==1){var d=$(".n4 .n4n1 .mask img")[0]}else{var d=$(".n4 .n4n2 .mask img")[0]}i.drawImage(d,0,0,this.cw,this.ch)};Face0_Wait.prototype.kill=function(){$(".dom-face-wait").remove()};function Face1_Face(e){this.cw=1136;this.ch=640;Face1_Face.me=this;var t=uPEC.aDiv(".dom-movie-canvas");this.div=t;JS90.me.dosize(this.div);this.drawCanvas(e)}Face1_Face.prototype.constructor=Face1_Face;Face1_Face.prototype.me;Face1_Face.prototype.canvas;Face1_Face.prototype.div;Face1_Face.prototype.cw;Face1_Face.prototype.ch;Face1_Face.prototype.cvs0;Face1_Face.prototype.cvs1;Face1_Face.prototype.sttx;Face1_Face.prototype.stty;Face1_Face.prototype.maskw;Face1_Face.prototype.maskh;Face1_Face.prototype.drawCanvas=function(e){var t=uPEC.aDiv(".dom1m");var a=uPEC.aDiv();var i=uPEC.aCanvas(this.cw,this.ch);this.cvs0=i;this.cvs0.appendTo(this.div);if(e==1){this.maskw=320;this.maskh=432}else{this.maskw=320;this.maskh=480}var r=uPEC.aCanvas(this.maskw,this.maskh);this.cvs1=r;if(e==1){this.sttx=495;this.stty=50}else{this.sttx=380;this.stty=50}this.doDraw(1,0,0,0)};Face1_Face.prototype.doDraw=function(e,t,a,i){var r=ABC.gender;var n=this.sttx+t;var o=this.stty+a;var s=this.cvs1[0];var c=s.getContext("2d");c.globalCompositeOperation="source-over";c.clearRect(0,0,this.maskw,this.maskh);c.fillStyle="0";c.fillRect(0,0,this.maskw,this.maskh);c.stroke();if(r==1){var l=$(".buffer .buffer1 img")[0]}else{var l=$(".buffer .buffer2 img")[0]}c.save();if(r==1){var p=1.02;var f=parseInt(280*p);var h=parseInt(370*p)}else{var p=1.12;var f=parseInt(280*p);var h=parseInt(370*p)}var d=[6,6];if(r==1){var u=this.maskw>>1;var v=this.maskh>>1;u+=ABC.mOffset[0];v+=ABC.mOffset[1]}else{var u=this.maskw>>1;var v=this.maskh>>1;u+=ABC.fOffset[0];v+=ABC.fOffset[1]}c.translate(u,v);if(r==1){c.rotate(-1*Math.PI/180)}else{c.rotate(-3*Math.PI/180)}c.drawImage(l,-f/2,-h/2,f,h);c.restore();c.globalCompositeOperation="xor";if(r==1){var m=$(".m1 img")[0]}else{var m=$(".f1 img")[0]}c.drawImage(m,0,0);var g=this.cvs0[0];var y=g.getContext("2d");var w=280;var C=this.maskw*e*(w/this.maskw);var b=this.maskh*e*(w/this.maskw);y.clearRect(0,0,this.cw,this.ch);if(r==1){realx=n+(C-this.maskw*e)/2}else{if(i<2){var t=0}else if(i<=4){var t=uMath.vvScope([5,30],[2,5],i)}else if(i<=9){var t=uMath.vvScope([25,30],[4,9],i)}else{var t=uMath.vvScope([30,40],[9,14],i)}realx=n+t}y.drawImage(s,realx,o,C,b)};Face1_Face.prototype.redraw=function(e){var t=ABC.posData["1m"][e+1];if(!t)return;var a=t[0];var i=t[1];var r=t[2];var n=a/this.cw*100;var o=i/this.ch*100;var s=624/this.cw;var c=241/this.ch;this.doDraw(r,a,i,e)};Face1_Face.prototype.kill=function(){$(".dom-movie-canvas").remove()};function Face2_Face(e){this.cw=1136;this.ch=640;Face2_Face.me=this;if(e==1){$(".dom-male .male-bg").show()}else{$(".dom-female .female-bg").show()}var t=uPEC.aDiv(".dom-movie-canvas");this.div=t;JS90.me.dosize(this.div);var a=$("#movie-male");var i=$("#movie-female");i.css("display","none");a.css("display","none");if(e==1){a.append(t)}else{i.append(t)}this.drawCanvas(e);if(e==1){a.show()}else{i.show()}}Face2_Face.prototype.constructor=Face2_Face;Face2_Face.prototype.me;Face2_Face.prototype.canvas;Face2_Face.prototype.div;Face2_Face.prototype.cw;Face2_Face.prototype.ch;Face2_Face.prototype.cvs0;Face2_Face.prototype.cvs1;Face2_Face.prototype.sttx;Face2_Face.prototype.stty;Face2_Face.prototype.maskw;Face2_Face.prototype.maskh;Face2_Face.prototype.drawCanvas=function(e){var t=uPEC.aDiv(".dom1m");var a=uPEC.aDiv();var i=uPEC.aCanvas(this.cw,this.ch);this.cvs0=i;this.cvs0.appendTo(this.div);if(e==1){this.maskw=419;this.maskh=342}else{this.maskw=419;this.maskh=342}var r=uPEC.aCanvas(this.maskw,this.maskh);this.cvs1=r;if(e==1){this.sttx=410;this.stty=50}else{this.sttx=410;this.stty=50}this.doDraw(1,0,0,0)};Face2_Face.prototype.doDraw=function(e,t,a,i){var r=ABC.gender;var n=this.sttx+t*this.cw/560;var o=this.stty+a*this.cw/560;var s=this.cvs1[0];var c=s.getContext("2d");c.globalCompositeOperation="source-over";c.clearRect(0,0,this.maskw,this.maskh);c.fillStyle="0";c.fillRect(0,0,this.maskw,this.maskh);c.stroke();if(r==1){var l=$(".buffer .buffer1 img")[0]}else{var l=$(".buffer .buffer2 img")[0]}c.save();if(r==1){var p=1.12;var f=parseInt(280*p);var h=parseInt(370*p)}else{var p=1.21;var f=parseInt(280*p);var h=parseInt(370*p)}var d=[6,6];if(r==1){var u=this.maskw>>1;var v=this.maskh>>1;u+=ABC.mOffset[0];v+=ABC.mOffset[1]}else{var u=this.maskw>>1;var v=this.maskh>>1;u+=ABC.fOffset[0];v+=ABC.fOffset[1]}c.translate(u,v);if(r==1){c.rotate(2*Math.PI/180)}else{}if(r==1){c.drawImage(l,-f/2-30,-h/2-30,f,h)}else{c.drawImage(l,-f/2+20,-h/2-30,f,h)}c.restore();c.globalCompositeOperation="xor";if(r==1){var m=$(".m2 img")[0]}else{var m=$(".f2 img")[0]}c.drawImage(m,0,0);var g=this.cvs0[0];var y=g.getContext("2d");var w=280;var C=this.maskw*e*(w/this.maskw);var b=this.maskh*e*(w/this.maskw);y.clearRect(0,0,this.cw,this.ch);if(r==1){y.drawImage(s,n,o)}else{y.drawImage(s,n-70,o-10)}};Face2_Face.prototype.doNext=function(){this.imgStep++;if(this.imgStep==this.imgArr.length){this.imgStep=0}var e=this.imgArr[this.imgStep];var t=e[1];if(t.indexOf("female")>-1){$(".female .female-bg").show();$(".male .male-bg").hide();$(".female").fadeIn();$(".male").hide();this.divFemale.append(this.canvas)}else{$(".female .female-bg").hide();
$(".male .male-bg").show();$(".male").fadeIn();$(".female").hide();this.divMale.append(this.canvas)}this.drawCanvas()};Face2_Face.prototype.redraw=function(e){var t=ABC.pos2[e];if(!t)return;var a=t[0];var i=t[1];var r=t[2];console.log(e,a,i);this.doDraw(r,a,i,e)};Face2_Face.prototype.kill=function(){$(".dom-movie-canvas").remove()};function Face3_Face(e){this.cw=1136;this.ch=640;Face3_Face.me=this;if(e==1){$(".dom-male .male-bg").show()}else{$(".dom-female .female-bg").show()}var t=uPEC.aDiv(".dom-movie-canvas");this.div=t;JS90.me.dosize(this.div);var a=$("#movie-male");var i=$("#movie-female");i.css("display","none");a.css("display","none");if(e==1){a.append(t)}else{i.append(t)}this.drawCanvas(e);if(e==1){a.show()}else{i.show()}}Face3_Face.prototype.constructor=Face3_Face;Face3_Face.prototype.me;Face3_Face.prototype.canvas;Face3_Face.prototype.div;Face3_Face.prototype.cw;Face3_Face.prototype.ch;Face3_Face.prototype.cvs0;Face3_Face.prototype.cvs1;Face3_Face.prototype.cvs2;Face3_Face.prototype.sttx;Face3_Face.prototype.stty;Face3_Face.prototype.maskw;Face3_Face.prototype.maskh;Face3_Face.prototype.drawCanvas=function(e){var t=uPEC.aDiv(".dom1m");var a=uPEC.aDiv();var i=uPEC.aCanvas(this.cw,this.ch);this.cvs0=i;this.cvs0.appendTo(this.div);if(e==1){this.maskw=419;this.maskh=342}else{this.maskw=419;this.maskh=342}var r=uPEC.aCanvas(this.maskw,this.maskh);this.cvs1=r;var n=uPEC.aCanvas(this.cw,this.ch);this.cvs2=n;if(e==1){this.sttx=410;this.stty=50}else{this.sttx=410;this.stty=50}this.doDraw(0,0,0,0,0)};Face3_Face.prototype.doDraw=function(e,t,a,i,r,n,o,s){if(s==undefined){return}if(r<16){this.div.hide()}else if(r==16){this.div.show();this.div.css("opacity",.6)}else{this.div.show();this.div.css("opacity",1)}var c=1;var l=ABC.gender;var p=this.cvs0[0];var f=p.getContext("2d");var h=this.cvs1[0];var d=h.getContext("2d");f.globalCompositeOperation="source-over";f.clearRect(0,0,this.cw,this.ch);f.stroke();if(l==1){var u=$(".buffer .buffer1 img")[0]}else{var u=$(".buffer .buffer2 img")[0]}var v=10;var m=10;v=parseInt(uMath.vvScope([10,40],[33,36],r));m=parseInt(uMath.vvScope([10,20],[33,36],r));v=Math.max(10,v);m=Math.max(10,m);if(r==34){v-=4;m-=8}if(r==35){v-=10;m-=15}if(r==36){v+=2;m-=0}if(r==38){v-=4;m-=25}if(r>32){}f.save();var g=259;var y=339;var w=[6,6];if(l==1){var C=254>>1;var b=349>>1;var F=733+n;var A=86+o;var _=C+F;var M=b+A;_+=ABC.mOffset[0]/2;M+=ABC.mOffset[1]/2}else{var C=254>>1;var b=349>>1;var F=733+n;var A=86+o;var _=C+F;var M=b+A;_+=ABC.fOffset[0]/2;M+=ABC.fOffset[1]/2}f.translate(_+v,M+m);f.rotate(s*Math.PI/180);f.fillStyle="0";f.fillRect(-252,-262,522,this.ch);if(l==1){f.drawImage(u,-C,-b-24,g,y)}else{f.drawImage(u,-C,-b,g,y)}f.restore();if(l==1){var D=$(".m3 img")[0]}else{var D=$(".f3 img")[0]}var k=this.cvs2[0];var x=k.getContext("2d");x.clearRect(0,0,this.cw,this.ch);x.drawImage(D,0,0);var O="fill";var n=e;var o=t;var I=e+a;var S=t+i/2;var P=e;var H=t+i;x.beginPath();x.moveTo(n,o);x.lineTo(I,S);x.lineTo(P,H);x[O+"Style"]="0";x.closePath();x.fill();f.save();f.translate(_+v,M+m);f.rotate(s*Math.PI/180);f.globalCompositeOperation="xor";f.drawImage(k,-252,-262);f.restore()};Face3_Face.prototype.doNext=function(){this.imgStep++;if(this.imgStep==this.imgArr.length){this.imgStep=0}var e=this.imgArr[this.imgStep];var t=e[1];if(t.indexOf("female")>-1){$(".female .female-bg").show();$(".male .male-bg").hide();$(".female").fadeIn();$(".male").hide();this.divFemale.append(this.canvas)}else{$(".female .female-bg").hide();$(".male .male-bg").show();$(".male").fadeIn();$(".female").hide();this.divMale.append(this.canvas)}this.drawCanvas()};Face3_Face.prototype.redraw=function(e){if(e<=13){this.doDraw(0,0,0,0,e,0)}else{var t=ABC.posData["3m"][e+1];var a=ABC.posData["angle"][e+1];if(!t)return;if(!a)return;var i=t[0];var r=t[1];var n=t[3];var o=a[0];var s=a[1];var c=a[2];var l=a[3];this.doDraw(o,s,c,l,e,i,r,n)}};Face3_Face.prototype.kill=function(){$(".dom-movie-canvas").remove()};function Face4_Face(e){Face4_Face.me=this;this.cw=1136;this.ch=640;this.maskw=614;this.maskh=388;var t=uPEC.aDiv(".dom-movie-canvas");this.div=t;JS90.me.dosize(this.div);this.drawCanvas(e)}Face4_Face.prototype.constructor=Face4_Face;Face4_Face.prototype.me;Face4_Face.prototype.canvas;Face4_Face.prototype.div;Face4_Face.prototype.cw;Face4_Face.prototype.ch;Face4_Face.prototype.cvs0;Face4_Face.prototype.cvs1;Face4_Face.prototype.cvs2;Face4_Face.prototype.maskw;Face4_Face.prototype.maskh;Face4_Face.prototype.drawCanvas=function(e){var t=uPEC.aCanvas(this.cw,this.ch);t.addClass("big");this.cvs0=t;this.cvs0.appendTo(this.div);var a=uPEC.aCanvas(this.maskw,this.maskh);this.cvs1=a;this.doDraw(0,0,0,0)};Face4_Face.prototype.doDraw=function(e,t,a,i,r){if(e==0&&t==0){return}if(e>this.cw){return}var n=1;var o=ABC.gender;var s=this.cvs0[0];var c=s.getContext("2d");c.clearRect(0,0,this.cw,this.ch);c.globalCompositeOperation="source-over";var l=this.cvs1[0];var p=l.getContext("2d");p.globalCompositeOperation="source-over";p.clearRect(0,0,this.maskw,this.maskh);if(o==1){var f=$(".buffer .buffer1 img")[0]}else{var f=$(".buffer .buffer2 img")[0]}var h=1;if(o==1){var d=3.6+h;var u=parseInt(280*d);var v=parseInt(370*d)}else{var d=3.1+h;var u=parseInt(280*d);var v=parseInt(370*d)}var m=[6,6];if(o==1){var g=this.maskw>>1;var y=this.maskh>>1}else{var g=this.maskw>>1;var y=this.maskh>>1}g+=m[0];y+=m[1];if(o==1){p.drawImage(f,-100,-450,u,v)}else{p.drawImage(f,-100,-360,u,v)}p.restore();p.globalCompositeOperation="xor";if(o==1){var w=$(".m4 img")[0]}else{var w=$(".f4 img")[0]}p.drawImage(w,0,0,this.maskw,this.maskh);c.clearRect(l,0,0,this.cw,this.ch);c.drawImage(l,e,t,this.maskw,this.maskh)};Face4_Face.prototype.redraw=function(e){if(ABC.gender==1){var t=ABC.posData["m4m"][e+1]}else{var t=ABC.posData["f4m"][e+1]}if(!t)return;var a=t[0];var i=t[1];var r=t[2];var n=t[3];this.doDraw(a,i,r,n,e)};Face4_Face.prototype.kill=function(){$(".dom-movie-canvas").remove()};function JPGArr(){}JPGArr.prototype.constructor=JPGArr;JPGArr.getNum=function(e){return ABC.num[e]};JPGArr.loop=function(e){return JPGArr.getLN(e)[5]};JPGArr.next=function(e){return JPGArr.getLN(e)[6]};JPGArr.type=function(e){return JPGArr.getLN(e)[0]};JPGArr.id=function(e){return JPGArr.getLN(e)[1]};JPGArr.getLN=function(e){for(var t=0;t<ABC.jpgArr.length;t++){var a=ABC.jpgArr[t];var i=a[0];var r=a[1];if(i==3&&e==r){return a}if(ABC.gender==i&&e==r){return a}}};JPGArr.getNum=function(e){return ABC.num[e]};function MiniData(){this.completePlay=false}MiniData.prototype.constructor=MiniData;MiniData.prototype.loaded=0;MiniData.prototype.len=0;MiniData.prototype.group;MiniData.prototype.now;MiniData.prototype.isbat;MiniData.prototype.asset;MiniData.prototype.point;MiniData.prototype.infoArr;MiniData.prototype.totalnum;MiniData.prototype.loadnum;MiniData.prototype.completePlay;MiniData.prototype.actID;MiniData.prototype.startPlay;MiniData.prototype.code=function(){return this.getInfo()[7]};MiniData.prototype.couldpre=function(){if(this.isbat){for(var e=0;e<this.infoArr.length;e++){var t=this.infoArr[e];if(t.length>8){var a=t[8];if(a){return true}}}return false}else{return this.infoArr[0][8]}return this.getInfo()[8]};MiniData.prototype.code2pre=function(){if(this.isbat){var e="";for(var t=0;t<this.infoArr.length;t++){var a=this.infoArr[t];if(a.length>7){var i=a[7];e+=i}}return e}else{return this.infoArr[0][7]}return this.getInfo()[7]};MiniData.prototype.loop=function(){return this.getInfo()[5]};MiniData.prototype.next=function(){return this.getInfo()[6]};MiniData.prototype.type=function(){return this.getInfo()[0]};MiniData.prototype.id=function(){return this.getInfo()[1]};MiniData.prototype.getInfo=function(){if(this.isbat){return this.infoArr[this.point]}else{return this.infoArr[0]}};function MV(){}MV.prototype.constructor=MV;MV.prototype.playJPG=function(e){if(e==undefined){return}var t=this;var a=0;function i(){if(a==e.length){window.clearInterval(t.d);t.check();return}var i=e[a];i.style.display="block";if(a==0){var r=e[e.length-1];r.style.display="none"}if(a>0&&a<e.length){var r=e[a-1];r.style.display="none"}a++}this.d=HKit.loop(ABC.frame,i,this)};function MV1(){window.mv1=this}MV1.prototype.constructor=MV1;MV1.prototype.tag;MV1.prototype.d;MV1.prototype.one;MV1.init=function(){if(!window.mv1){new MV1}};MV1.prototype.playJPG=function(e,t){if(e==undefined){return}var a=this;var i=0;function r(){if(i==e.length){window.clearInterval(a.d);a.check();var r=e[e.length-1];if(!t){r.parentElement.removeChild(r);r=null;e[i-1]=null}return}var n=e[i];n.style.display="block";if(i==0){var r=e[e.length-1];r.style.display="none"}if(i>0&&i<e.length){var r=e[i-1];r.style.display="none";if(!t){r.parentElement.removeChild(r);r=null;e[i-1]=null}}i++}this.d=HKit.loop(ABC.frame,r,this)};MV1.prototype.playHomepage=function(){this.tag="0";var e=window.preload.imgass.getImg(["0","0a"]);for(var t=0;t<e.length;t++){var a=e[t];for(var i=0;i<a.length;i++){var r=a[i];$(".n2 .dom-holder").append(r)}}var n=this;var a=e[0];this.playJPG(a,false);this.arr=e};MV1.prototype.removeOld=function(){for(var e=0;e<this.imgArr.length;e++){var t=this.imgArr[e];$(t).remove()}};MV1.prototype.check=function(){if(this.tag=="0"){$(".btn-start").fadeIn();an.do_png_top();window.preload.playMp3pre(Muz.loop1,true);window.preload.playMp3preB(Muz.m0loop,true)}this.tag="0a";if(this.tag=="0a"){}this.playJPG(this.arr[1],true)};MV1.prototype.kill=function(){clearInterval(this.d);$(".n2 .dom-holder img").remove();for(var e=0;e<this.arr.length;e++){var t=this.arr[e];var a=t.length;for(var i=0;i<a;i++){var r=t[i];if(r){r=null}else{}}t=null}this.arr=null;window.preload.imgass.kill(["0","0a"])};function MV2(){MV2.me=this}MV2.prototype.constructor=MV2;MV2.me;MV2.prototype.order;MV2.prototype.allArr;MV2.prototype.point=0;MV2.prototype.id4Time;MV2.prototype.nowID;MV2.prototype.bannerTxtGroup;MV2.init=function(){if(!window.mv2){new MV2}};MV2.prototype.playJPG=function(e,t,a,i){if(e==undefined){return}var r=this;var n=0;function o(){if(n==e.length){if(a==4){n=0;if(ABC.click_n4){for(var o=0;o<e.length;o++){var s=e[o];s.parentElement.removeChild(s);s=null;e[o]=null}r.check();return}}else if(a==8){n=0;if(ABC.click_n11){HKit.delay(.3,function(e){for(var t=0;t<e.length;t++){var a=e[t];a.parentElement.removeChild(a);a=null;e[t]=null}},this,[e]);r.check();return}}else{r.check();if(!i){var s=e[n-1];s.parentElement.removeChild(s);s=null;e[n-1]=null}return}}if(a==7&&n==e.length-8){window.preload.playMp3B(Muz.loop1,true)}var c=e[n];c.style.display="block";if(n==0){var s=e[e.length-1];s.style.display="none"}if(n>0&&n<e.length){var s=e[n-1];s.style.display="none";if(!i){s.parentElement.removeChild(s);s=null;e[n-1]=null}}if(this.bannerTxtGroup&&a<8){for(var o=0;o<this.bannerTxtGroup.length;o++){var l=this.bannerTxtGroup[o];var p=l[0];var f=l[1];if(n==p){var h=l[2];var d=$(".right-bottom-banner ."+h+" .banner");d.fadeIn()}if(n==f){var h=l[2];var d=$(".right-bottom-banner ."+h+" .banner");d.hide()}}}if(t==1||t==2){if(window.face){window.face.redraw(n)}}n++}if(this.nowID==7){this.d=HKit.loop(ABC.frame-.008,o,this)}else{this.d=HKit.loop(ABC.frame,o,this)}};MV2.prototype.playMovie=function(){ABC.video_rot=0;ABC.click_n4=false;ABC.click_n11=false;this.allArr=[];this.tag="1";this.point=0;this.order=ABC.order;var e;if(ABC.gender==1){e=window.cn5.imgss1}else{e=window.cn5.imgss2}for(var t=0;t<this.order.length;t++){var a=this.order[t];var i=window.preload.imgass.getImgOne(a);var r=e.getImgOne(a);var n;if(i.length>0){n=i}else if(r.length>0){n=r}else{}for(var o=0;o<n.length;o++){var s=n[o];$(".n6 .timeline").append(s)}this.allArr.push(n)}$(".game-main-body>div").hide();$(".game-main-body>.n6").show();this.check()};MV2.prototype.check=function(){if(this.d){window.clearInterval(this.d);this.d=null}if(this.point+1>this.allArr.length){if(!CnEnd.me){new CnEnd}CnEnd.me.startplay();return}var e=this.order[this.point];var t=JPGArr.type(e);var a=JPGArr.loop(e);if(e==4){this.id4Time=OJ.getTime();$(".game-main-body>.n8").show();window.addEventListener("deviceorientation",this.handleOrientation);window.preload.playMp3(Muz.loop1,true);window.preload.playMp3pre(Muz.m5)}if(e==1){if(window.share&&window.share.loadAsset){window.share.loadAsset()}new CnEnd;CnEnd.me.startload()}if(e==10){}this.nowID=e;var i=this.allArr[this.point];if(e==4||e==8){this.playJPG(i,t,e,true)}else{if(e==9){HKit.delay(.3,function(){this.playJPG(i,t,e,false)},this)}else if(e==1){var r=i[0];r.style.display="block";HKit.delay(.76,function(){window.preload.playMp3(Muz.m1);window.preload.playMp3pre(Muz.loop1,true);this.playJPG(i,t,e,false)},this)}else{this.playJPG(i,t,e,false)}}if(e=="1"){}else if(e=="5"){window.preload.playMp3(Muz.m5);window.preload.playMp3preB(Muz.loop1,true)}else if(e=="9"){window.preload.stopMp3Other();window.preload.playMp3(Muz.m9)}this.bannerTxtGroup=ABC.banner[e];if(t==1||t==2){if(e=="1"){window.face=new Face1_Face(ABC.gender)}if(e=="3"){window.face=new Face2_Face(ABC.gender)}if(e=="6"){window.face=new Face3_Face(ABC.gender)}if(e=="10"){window.face=new Face4_Face(ABC.gender)}}else{if(window.face){window.face.kill();window.face=null}}if(e==8){$(".game-main-body>.n11").show();$(".n11 .hotarea").css("opacity",.001);$(".n11 .hotarea").click(function(){ABC.click_n11=true;$(".game-main-body>.n11").hide()});window.preload.playMp3pre(Muz.m9)}this.point++};MV2.prototype.handleOrientation=function(e){var t=e.gamma;if(!UDevice.getMe().isMobile){ABC.click_n4=true;return}if(isNaN(t)){return}if(ABC.video_rot==0){if(t!=0){ABC.video_rot=t}return}if(OJ.getTime()-this.id4Time<1500){return}t=parseInt(t);if(Math.abs(ABC.video_rot-t)>8){ABC.click_n4=true;$(".game-main-body>.n8").hide();window.removeEventListener("deviceorientation",this.handleOrientation)}};MV2.prototype.kill=function(){clearInterval(this.d);$(".n2 .dom-holder img").remove()};function PEC(){PEC.me=this;this.state=0;$(".game-main-stt").hide();$(".game-main-body").hide();$(".game-main-end").hide();H5Loader.loadImg(".game-main-stt img",this.onloading,this.onloadok,this);SiteEvt.add("imgok",this.imgok,this)}PEC.prototype.constructor=PEC;PEC.me;PEC.prototype.state;PEC.prototype.imgok=function(e){var t=$("#pre-male");var a=$("#pre-female");a.css("display","none");t.css("display","none");$(".male .face1m").hide();$(".male .face1f").hide();$(".male .male-bg").hide();$(".male .female-bg").hide();var i=e.news.path;var r=OJ.GetQueryString("test");if(ABC.isstatic){if(ABC.gender==1){i="images/m1.jpg"}if(ABC.gender==2){i="images/f1.jpg"}}if(ABC.gender==1){var n=$(".buffer .buffer1 img")[0];n.onload=function(){window.h5jump.doNext(1,true);new ScreenDriver_Face(1)};n.onerror=function(){};n.src=i}if(ABC.gender==2){var o=$(".buffer .buffer2 img")[0];o.onload=function(){window.h5jump.doNext(1,true);new ScreenDriver_Face(2)};o.onerror=function(){};o.src=i}};PEC.prototype.onloading=function(e,t){Preload.me.doUpdate(e,t)};PEC.prototype.onloadok=function(){Preload.me.doUpdate(100,100)};PEC.prototype.doFade=function(){$(".dom-holder").hide();if(ABC.start=="n6"){var e="images/m1.jpg";var t="images/f1.jpg";$(".buffer .buffer1 img")[0].src=e;$(".buffer .buffer2 img")[0].src=t;new Cn5;new MV2;new CnShare;new CnQrcode;ABC.start="n5";new H5Jump;window.cn5.load();return}if(ABC.ispart1){var a=new Face0_Wait;SiteEvt.dis("exeing");setTimeout(function(){ABC.start="n5";ABC.order=[3];new Cn5;ABC.frame=2;ABC.frame=1/4;window.cn5.load();SiteEvt.dis("exeok")},2e3);return}if(ABC.ispart2){new Cn5;new MV2;new CnShare;new CnQrcode;ABC.start="last";new H5Jump;window.cn5.load();return}HKit.delay(.4,function(){var e=$(".loading_mid .redbar");$(".css-num").fadeOut("slow");e.fadeOut("slow",function(){var t=$(".loading_mid .txt");t.fadeIn("slow");e.fadeIn("slow",function(){HKit.delay(1,function(){$(".loading_mid").fadeOut("slow")});HKit.delay(1.6,function(){window.preload.playMp3_end(Muz.m0,Muz.m0loop)});HKit.delay(1.6,function(){window.mv1.playHomepage();$(".dom-holder").hide();$(".dom-holder").fadeIn();document.getElementById("music_icon").style.top="0%";$(".music_icon").fadeIn()})})});new Face0_Wait;new Cn3;new AniLoop;new H5Jump;new CnShare})};function ScreenDriver_Face(e){ScreenDriver_Face.me=this;var t=$(".game-page");if(ABC.gender==1){$(".n5 .face1m").show();$(".n5 .face1f").hide()}else{$(".n5 .face1m").hide();$(".n5 .face1f").show()}if(e==1){$(".male .male-bg").show()}else{$(".female .female-bg").show()}var a=uPEC.aDiv(".dom-canvas");this.div=a;var i=$("#pre-male");var r=$("#pre-female");r.css("display","none");i.css("display","none");if(e==1){i.append(a)}else{r.append(a)}this.drawCanvas(e);if(e==1){i.show()}else{r.show()}}ScreenDriver_Face.prototype.constructor=ScreenDriver_Face;ScreenDriver_Face.prototype.me;ScreenDriver_Face.prototype.canvas;ScreenDriver_Face.prototype.div;ScreenDriver_Face.prototype.drawCanvas=function(e){var t=uPEC.aDiv(".lastPhoto");var a=uPEC.aDiv();var i=uPEC.aCanvas(1334,648);this.cvs1=i;this.cvs1.appendTo(this.div);this.cvs1.width("100%");var r=i[0];var n=r.getContext("2d");n.clearRect(0,0,1134,648);n.fillStyle="0";n.fillRect(0,0,1334,648);n.stroke();if(e==1){var o=$(".buffer .buffer1 img")[0]}else{var o=$(".buffer .buffer2 img")[0]}n.save();if(e==1){var s=1.03575;var c=parseInt(280*s);var l=parseInt(370*s)}else{var s=1.18;var c=parseInt(280*s);var l=parseInt(370*s)}var p=[6,6];if(e==1){var f=650;var h=230;f+=ABC.mOffset[0]-10;h+=ABC.mOffset[1]+4}else{var f=660;var h=250;f+=ABC.fOffset[0];h+=ABC.fOffset[1]}n.translate(f,h);if(e==1){n.rotate(-1*Math.PI/180)}else{n.rotate(-3*Math.PI/180)}n.drawImage(o,-c/2,-l/2,c,l);n.restore();n.globalCompositeOperation="xor";if(e==1){var d=$(".male .male-face img")[0]}else{var d=$(".female .female-face img")[0]}n.drawImage(d,0,0)};function ScreenLast_Face(e){$(".last").show();this.maleOriginal=$(".last .male");this.doDraw1(e)}ScreenLast_Face.prototype.constructor=ScreenLast_Face;ScreenLast_Face.prototype.cvs2;ScreenLast_Face.prototype.maleOriginal;ScreenLast_Face.prototype.doDraw1=function(e){var t=1136;var a=684;var i=$(".game-main-end .last .lastDom");var r=uPEC.aDiv(".last-photo",".game-main-end .last .lastDom");var n=uPEC.aDiv();var o=uPEC.aCanvas(t,a);var s=uPEC.aCanvas(t,a);this.cvs1=o;this.cvs2=s;this.cvs2.appendTo(r);var c=o[0];var l=c.getContext("2d");l.fillStyle="0";l.fillRect(0,0,t,a);l.stroke();if(e==1){var p=$(".buffer .buffer1 img")[0]}else{var p=$(".buffer .buffer2 img")[0]}l.save();if(e==1){var f=70;var h=94}else{var f=76;var h=102}if(e==1){var d=938;var u=131}else{var d=941;var u=177}l.translate(d,u);l.rotate(-2*Math.PI/180);l.drawImage(p,-f/2,-h/2,f,h);l.restore();if(e==1){var v=$(".lastPhoto .male .black img")[0]}else{var v=$(".lastPhoto .female .black img")[0]}l.globalCompositeOperation="xor";l.drawImage(v,-1,-1);var m=s[0];var g=m.getContext("2d");if(e==1){var y=$(".lastPhoto .male .bg img")[0]}else{var y=$(".lastPhoto .female .bg img")[0]}g.drawImage(y,0,0);if(e==1){g.drawImage(c,0,0)}else{g.drawImage(c,0,0)}i.css("transform","rotate(-5.85deg)");i.css("visibility","visible");var w=this.maleOriginal;var C=this.maleOriginal.position();var b=this.maleOriginal.css("left");var F=this.maleOriginal.css("top");var A=uPEC.convertCanvasToImage(this.cvs2[0]);r.find("canvas").css({width:"100%",bottom:"0"});$(A).css({width:"100%",bottom:"0"});r.empty();r.append($(A));TweenLite.from(i,.6,{left:"-123",transform:"rotate(-40deg)"});$(".last .male").hide();$(".last .female").hide()};function uPEC(){}uPEC.prototype.constructor=uPEC;uPEC.aCanvas=function(e,t){var a=$("<canva"+"s></canva"+"s>");var i=a[0];i.width=e;i.height=t;return a};uPEC.aDiv=function(e,t){var a=$('<div class="abs"></div>');if(t){a.appendTo($(t))}else{a.appendTo($("#pageWrap"))}if(e){if(e.indexOf(".")>-1){var i=e.replace(".","");a.addClass(i)}}return a};uPEC.convertCanvasToImage=function(e){var t=new Image;t.crossOrigin="anonymous";t.src=e.toDataURL("image/png");return t};uPEC.GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");var a=window.location.search.substr(1).match(t);if(a!=null)return unescape(a[2]);return null};